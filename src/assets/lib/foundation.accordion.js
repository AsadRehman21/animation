!function($,Foundation){'use strict';function Accordion(element,options){this.$element=element;this.options=$.extend({},Accordion.defaults,this.$element.data(),options);this._init();Foundation.registerPlugin(this,'Accordion');Foundation.Keyboard.register('Accordion',{'ENTER':'toggle','SPACE':'toggle','ARROW_DOWN':'next','ARROW_UP':'previous'});}
Accordion.defaults={slideSpeed:250,multiExpand:false,allowAllClosed:false};Accordion.prototype._init=function(){this.$element.attr('role','tablist');this.$tabs=this.$element.children('li');if(this.$tabs.length==0){this.$tabs=this.$element.children('[data-accordion-item]');}
this.$tabs.each(function(idx,el){var $el=$(el),$content=$el.find('[data-tab-content]'),id=$content[0].id||Foundation.GetYoDigits(6,'accordion'),linkId=el.id||id+'-label';$el.find('a:first').attr({'aria-controls':id,'role':'tab','id':linkId,'aria-expanded':false,'aria-selected':false});$content.attr({'role':'tabpanel','aria-labelledby':linkId,'aria-hidden':true,'id':id});});var $initActive=this.$element.find('.is-active').children('[data-tab-content]');if($initActive.length){this.down($initActive,true);}
this._events();};Accordion.prototype._events=function(){var _this=this;this.$tabs.each(function(){var $elem=$(this);var $tabContent=$elem.children('[data-tab-content]');if($tabContent.length){$elem.children('a').off('click.zf.accordion keydown.zf.accordion').on('click.zf.accordion',function(e){e.preventDefault();if($elem.hasClass('is-active')){if(_this.options.allowAllClosed||$elem.siblings().hasClass('is-active')){_this.up($tabContent);}}
else{_this.down($tabContent);}}).on('keydown.zf.accordion',function(e){Foundation.Keyboard.handleKey(e,'Accordion',{toggle:function(){_this.toggle($tabContent);},next:function(){$elem.next().find('a').focus().trigger('click.zf.accordion');},previous:function(){$elem.prev().find('a').focus().trigger('click.zf.accordion');},handled:function(){e.preventDefault();e.stopPropagation();}});});}});};Accordion.prototype.toggle=function($target){if($target.parent().hasClass('is-active')){if(this.options.allowAllClosed||$target.parent().siblings().hasClass('is-active')){this.up($target);}else{return;}}else{this.down($target);}};Accordion.prototype.down=function($target,firstTime){var _this=this;if(!this.options.multiExpand&&!firstTime){var $currentActive=this.$element.find('.is-active').children('[data-tab-content]');if($currentActive.length){this.up($currentActive);}}
$target.attr('aria-hidden',false).parent('[data-tab-content]').addBack().parent().addClass('is-active');$target.slideDown(_this.options.slideSpeed);$('#'+$target.attr('aria-labelledby')).attr({'aria-expanded':true,'aria-selected':true});this.$element.trigger('down.zf.accordion',[$target]);};Accordion.prototype.up=function($target){var $aunts=$target.parent().siblings(),_this=this;var canClose=this.options.multiExpand?$aunts.hasClass('is-active'):$target.parent().hasClass('is-active');if(!this.options.allowAllClosed&&!canClose){return;}
$target.slideUp(_this.options.slideSpeed);$target.attr('aria-hidden',true).parent().removeClass('is-active');$('#'+$target.attr('aria-labelledby')).attr({'aria-expanded':false,'aria-selected':false});this.$element.trigger('up.zf.accordion',[$target]);};Accordion.prototype.destroy=function(){this.$element.find('[data-tab-content]').slideUp(0).css('display','');this.$element.find('a').off('.zf.accordion');Foundation.unregisterPlugin(this);};Foundation.plugin(Accordion,'Accordion');}(jQuery,window.Foundation);